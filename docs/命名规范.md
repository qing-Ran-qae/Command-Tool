# 命名规范

ct 的命名规则和函数结构规范等<br>
如果你想要为 ct 制作新工具则须遵守

## 文件结构

ct 将不同类型的工具分为不同工具类

文件层级关系为

```
ct
└ data
    └ function
        └ 工具类
            ├ 工具/ : 工具除tick以外的其他函数
            │    ├ meth/ : 工具的所有方法
            │    │    └ 方法.mcfunction
            │    └ (工具的其他函数) : 具体内容自定义
            └ 工具.mcfunction : 工具的tick函数
```

如果函数的某部分需要调用子函数，子函数应在和函数同级同名的文件夹中，例如：<br>
`.../my_meth/a`是`.../my_meth`的子函数

如果你的工具符合已有类的定义，请将其添加在已有类中<br>
如果你的工具不符合任何已有类的定义那么你可以新建类

**定义类**

请确保新类定义的涵盖范围不会太广也不太小<br>
具体范围可参考 ct 的几个默认类

**定义工具**

如果你只是想添加几个杂项功能，可以直接将其添加进`code/pt`工具中

如果你确定你的工具目的没有和已有工具重合那么你可以新建一个工具<br>
请确保你的工具内容足够具体，不会出现意义不明的东西

**类和工具的命名**

尽量控制类或工具的 id 长度在 8 字以内<br>
比较推荐使用全名的简写/缩写作为工具 id

如果全名比较短那么 id 可以不用缩写

在满足以上长度要求的前提下，确保 id 不会和其他同级文件(夹)重复<br>
例如新类不和已有类 id 重复，工具不和已有工具 id 重复

## 函数结构

### 函数头

所有函数都应使用[imp doc](https://github.com/Arcensoth/imp-spec/blob/master/docs/imp_doc.md)格式标头<br>
不必须要有函数描述部分

### 注释

确保注释层级和内容明确

### 指令格式

`exeucte`等长命令推荐使用`\`换行写(不必须)

### 必须的子函数

对于必须额外套一层或很多层子函数才能实现的功能<br>
这些子函数的名称可以是：函数内容的注释、字典(a->z->aa->az->ba...)、顺序(1->2->3...)

不推荐的格式：

- `xxx_foo`、`foo_xxx`、`bar_xxx`
- `1foo`、`2foo`、`3foo`
- `fooa`、`foob`、`fooc`

对于多个不同的函数部分，可以选择为每个部分命名<br>
文件格式为：

```
.../
├ 函数.mcfunction
└ 函数/
    ├ 某个部分.mcfunction
    └ 某个部分/
        └ 注释/字典/顺序.mcfunction
```

调用这部分的子函数需先调用`.../函数/某个部分.mcfunction`，<br>
然后可在`某个部分.mcfunction`或父函数中调用后续函数(需要嵌套多层子函数的情况下)

也可不为对应的部分命名，文件格式为：

```
函数.mcfunction
函数/
    └ 某个部分/
        └ 注释/字典/顺序.mcfunction
```

如果函数只有一个部分需要嵌套子函数实现功能，可直接在"`函数/`"下创建多个步骤对应的子函数，文件格式为：

```
函数.mcfunction
函数/
└ 注释/字典/顺序.mcfunction
```

如果你的函数内容符合多个子函数格式，可以选择任意一个

tip: 请确保子函数的标头格式正确

## 临时变量/数据

tip: 目前只有对于储存和计分板的临时数据标准

临时数据格式为`ct:temp 方法名/函数名.内容`

- `ct:temp`储存用于存放所有缓存数据，称之为缓存储存
- 缓存储存根目录下的键相当于"内存空间"

确保你的键名和方法名/函数名基本一样

**删除缓存数据**

确保在所以使用了缓存数据的函数执行完后都会正确的删除缓存数据

**对于计分板**

对于计分板，基本格式不变，几个计分板格式的缓存数据：

- `ct.temp.foo abc`
- `ct.temp.bar 123.xxx`
- `ct.temp.baz has.xxx`

对于计分板格式的更改：

- 命名空间的`:`替换为`.`
- data 命令中区分储存和键的空格替换为`.`

注意：

- 每个"内存空间"为一个计分板
- ct.temp 后最多细到方法，不可出现`ct.temp.类.工具.方法.子函数/方法中的变量`等格式

对于计分板的缓存储存，删除对应"内存空间"的计分板即可删除

## 域变量

如有像 stat 工具的"info"状态信息一样，不确定在哪个函数但固定在某个范围内的函数中调用<br>
此类变量判为"在某个域内"，如果是在某个工具内格式可以是`类.工具.变量`，如果是在某个类内格式可以是`类.变量`

**删除**

删除域变量只需删除变量值即可，不需要删除变量的父级键

## tick 临时数据

对于工具 tick 函数中的临时数据，格式为`ct:temp 类.工具.tick.xxx`
